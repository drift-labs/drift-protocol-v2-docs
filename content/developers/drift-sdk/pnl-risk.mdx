# PnL & Risk

These helpers are commonly used for risk checks, dashboards, and liquidation logic.

### User health

<SDKDoc>
  <TypeScript name="getHealth" type="method" owner="User">
```js
const user = driftClient.getUser();
const health = user.getHealth();
console.log(health.toString());
```
  </TypeScript>

  <Python name="driftpy.drift_user.DriftUser.get_health">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

### Collateral, margin requirement, leverage

<SDKDoc>
  <TypeScript name="getTotalCollateral" type="method" owner="User">
```js
const total = driftClient.getUser().getTotalCollateral();
console.log(total.toString());
```
  </TypeScript>

  <Python name="driftpy.drift_user.DriftUser.get_total_collateral">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

<SDKDoc>
  <TypeScript name="getMarginRequirement" type="method" owner="User">
```js
const req = driftClient.getUser().getMarginRequirement();
console.log(req.toString());
```
  </TypeScript>

  <Python name="driftpy.drift_user.DriftUser.get_margin_requirement">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

<SDKDoc>
  <TypeScript name="getFreeCollateral" type="method" owner="User">
```js
const free = driftClient.getUser().getFreeCollateral();
console.log(free.toString());
```
  </TypeScript>

  <Python name="driftpy.drift_user.DriftUser.get_free_collateral">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

<SDKDoc>
  <TypeScript name="getLeverage" type="method" owner="User">
```js
const lev = driftClient.getUser().getLeverage();
console.log(lev.toString());
```
  </TypeScript>

  <Python name="driftpy.drift_user.DriftUser.get_leverage">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

### Unrealized PnL

<SDKDoc>
  <TypeScript name="getUnrealizedPNL" type="method" owner="User">
```js
const pnl = driftClient.getUser().getUnrealizedPNL();
console.log(pnl.toString());
```
  </TypeScript>

  <Python name="driftpy.drift_user.DriftUser.get_unrealized_pnl">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

<SDKDoc>
  <TypeScript name="getUnrealizedFundingPNL" type="method" owner="User">
```js
const pnl = driftClient.getUser().getUnrealizedFundingPNL();
console.log(pnl.toString());
```
  </TypeScript>

  <Python name="driftpy.drift_user.DriftUser.get_unrealized_funding_pnl">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

### Entry price helper

<SDKDoc>
  <TypeScript name="calculateEntryPrice" type="function">
```js
import { calculateEntryPrice } from "@drift-labs/sdk";

const position = driftClient.getUser().getPerpPosition(0);
if (position) {
  const entryPrice = calculateEntryPrice(position);
  console.log(entryPrice.toString());
}
```
  </TypeScript>

  <Python name="driftpy.math.perp_position.calculate_entry_price">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

### Settle perp PnL

<SDKDoc>
  <TypeScript name="settlePNL" type="method" owner="DriftClient">
```js
const user = driftClient.getUser();
await driftClient.settlePNL(user.userAccountPublicKey, user.getUserAccount(), 0);
```
  </TypeScript>

  <Python name="driftpy.drift_client.DriftClient.settle_pnl">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

