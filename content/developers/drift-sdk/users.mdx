# Users

Most write actions in Drift are done through `DriftClient`. For account-level reads (positions, orders, health), youâ€™ll typically use a `User`.

### Initialize a user account

<SDKDoc>
  <TypeScript name="initializeUserAccount" type="method" owner="DriftClient">
```js
// Assumes you already constructed and subscribed `driftClient`.
const [txSig, userAccountPublicKey] = await driftClient.initializeUserAccount(0, "my-account");
console.log(txSig, userAccountPublicKey.toBase58());
```
  </TypeScript>

  <Python name="driftpy.drift_client.DriftClient.initialize_user">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

### Get the next subaccount id

<SDKDoc>
  <TypeScript name="getNextSubAccountId" type="method" owner="DriftClient">
```js
const nextId = driftClient.getNextSubAccountId();
console.log(nextId);
```
  </TypeScript>

  <Python name="getNextSubAccountId">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

### Get a User and subscribe

<SDKDoc>
  <TypeScript name="User" type="class">
```js
import { User } from "@drift-labs/sdk";

const user = driftClient.getUser(); // convenience helper
await user.subscribe();
```
  </TypeScript>

  <Python name="driftpy.drift_user.DriftUser">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

<SDKDoc>
  <TypeScript name="getUser" type="method" owner="DriftClient">
```js
const user = driftClient.getUser(); // active subaccount
```
  </TypeScript>

  <Python name="driftpy.drift_client.DriftClient.get_user">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

<SDKDoc>
  <TypeScript name="getUser" type="method" owner="DriftClient">
```js
// Fetch a specific subaccount.
const user = driftClient.getUser(1);
```
  </TypeScript>

  <Python name="driftpy.drift_client.DriftClient.get_user">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

<SDKDoc>
  <TypeScript name="getUserAccount" type="method" owner="User">
```js
const account = driftClient.getUser().getUserAccount();
console.log(account);
```
  </TypeScript>

  <Python name="driftpy.accounts.get_accounts.get_user_account">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

<SDKDoc>
  <TypeScript name="getUserAccount" type="method" owner="DriftClient">
```js
const account = driftClient.getUserAccount(); // active subaccount
console.log(account);
```
  </TypeScript>

  <Python name="driftpy.accounts.get_accounts.get_user_account">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

<SDKDoc>
  <TypeScript name="fetchAccounts" type="method" owner="User">
```js
const user = driftClient.getUser(0);
await user.fetchAccounts();
```
  </TypeScript>

  <Python name="fetchAccounts">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

### Derived addresses (user account)

<SDKDoc>
  <TypeScript name="getUserAccountPublicKey" type="method" owner="DriftClient">
```js
const userAccountPublicKey = await driftClient.getUserAccountPublicKey(0);
console.log(userAccountPublicKey.toBase58());
```
  </TypeScript>

  <Python name="driftpy.drift_client.DriftClient.get_user_account_public_key">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

### Query user state (orders / positions)

<SDKDoc>
  <TypeScript name="getTokenAmount" type="method" owner="User">
```js
import { BN } from "@drift-labs/sdk";

const user = driftClient.getUser();
const tokenAmount = user.getTokenAmount(0);

const isDeposit = tokenAmount.gte(new BN(0));
const isBorrow = tokenAmount.lt(new BN(0));
console.log({ tokenAmount: tokenAmount.toString(), isDeposit, isBorrow });
```
  </TypeScript>

  <Python name="driftpy.math.spot_market.get_token_amount">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

<SDKDoc>
  <TypeScript name="getPerpPosition" type="method" owner="User">
```js
const position = driftClient.getUser().getPerpPosition(0);
console.log(position?.baseAssetAmount.toString());
```
  </TypeScript>

  <Python name="driftpy.drift_user.DriftUser.get_perp_position">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

<SDKDoc>
  <TypeScript name="getOrder" type="method" owner="User">
```js
const order = driftClient.getUser().getOrder(1);
console.log(order);
```
  </TypeScript>

  <Python name="driftpy.drift_user.DriftUser.get_order">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

<SDKDoc>
  <TypeScript name="getOrderByUserOrderId" type="method" owner="User">
```js
const order = driftClient.getUser().getOrderByUserOrderId(1);
console.log(order);
```
  </TypeScript>

  <Python name="driftpy.drift_user.DriftUser.get_order_by_user_order_id">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

<SDKDoc>
  <TypeScript name="getOpenOrders" type="method" owner="User">
```js
const orders = driftClient.getUser().getOpenOrders();
console.log(orders.length);
```
  </TypeScript>

  <Python name="driftpy.drift_user.DriftUser.get_open_orders">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

### Switch active subaccount

<SDKDoc>
  <TypeScript name="switchActiveUser" type="method" owner="DriftClient">
```js
// Switch to subaccount 1.
driftClient.switchActiveUser(1);
```
  </TypeScript>

  <Python name="driftpy.drift_client.DriftClient.switch_active_user">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

### Update user settings (delegate / margin)

<SDKDoc>
  <TypeScript name="updateUserDelegate" type="method" owner="DriftClient">
```js
import { PublicKey } from "@solana/web3.js";

await driftClient.updateUserDelegate(new PublicKey("<DELEGATE_PUBKEY>"), 0);
```
  </TypeScript>

  <Python name="updateUserDelegate">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

<SDKDoc>
  <TypeScript name="updateUserMarginTradingEnabled" type="method" owner="DriftClient">
```js
await driftClient.updateUserMarginTradingEnabled(true, 0);
```
  </TypeScript>

  <Python name="driftpy.drift_client.DriftClient.update_user_margin_trading_enabled">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

<SDKDoc>
  <TypeScript name="updateUserCustomMarginRatio" type="method" owner="DriftClient">
```js
import { MARGIN_PRECISION } from "@drift-labs/sdk";

await driftClient.updateUserCustomMarginRatio([
  { marginRatio: MARGIN_PRECISION, subAccountId: 0 },
]);
```
  </TypeScript>

  <Python name="driftpy.drift_client.DriftClient.update_user_custom_margin_ratio">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

### Delete a user account

If a subaccount has no assets/liabilities, it can be deleted to reclaim rent.

<SDKDoc>
  <TypeScript name="deleteUser" type="method" owner="DriftClient">
```js
await driftClient.deleteUser(1);
```
  </TypeScript>

  <Python name="deleteUser">
```py
# TODO: replace with a real DriftPy example
```
  </Python>
</SDKDoc>

