# Builder Codes

Builder Codes (DBC) let integrators earn fees by routing flow through their application. The workflow has 3 steps: **builder initializes revenue share** → **user creates escrow** → **user approves builder with max fee**.

## Setup

First, initialize the DriftClient for both the builder and user:

Create and subscribe separate `DriftClient` instances for builder and user authorities.

<SDKDoc>
  <TypeScript name="Builder codes setup" type="example">
```js
import { DriftClient } from "@drift-labs/sdk";
import { Connection, Keypair, PublicKey } from "@solana/web3.js";

// Initialize connection
const connection = new Connection("https://api.mainnet-beta.solana.com");

// Builder wallet (revenue share provider)
const builderWallet = Keypair.fromSecretKey(/* builder secret key */);
const builderAuthority = builderWallet.publicKey;

// User wallet (end user)
const userWallet = Keypair.fromSecretKey(/* user secret key */);
const takerAuthority = userWallet.publicKey;

// Builder client
const builderClient = new DriftClient({
  connection,
  wallet: builderWallet,
  env: "mainnet-beta"
});
await builderClient.subscribe();

// User client
const userClient = new DriftClient({
  connection,
  wallet: userWallet,
  env: "mainnet-beta"
});
await userClient.subscribe();
```
  </TypeScript>
</SDKDoc>

## SDK Usage

### Builder: Initialize Revenue Share

Create the builder's onchain revenue-share configuration account.

<SDKDoc>
  <TypeScript name="initializeRevenueShare" type="method" owner="DriftClient">
```js
await builderClient.initializeRevenueShare(builderAuthority);
```
  </TypeScript>
</SDKDoc>

### User: Initialize Escrow

Create the user's revenue-share escrow account used for builder fee routing.

<SDKDoc>
  <TypeScript name="initializeRevenueShareEscrow" type="method" owner="DriftClient">
```js
await userClient.initializeRevenueShareEscrow(takerAuthority, 16);
```
  </TypeScript>
</SDKDoc>

### User: Approve a Builder (Max Fee)

Approve a builder for this user and set the maximum fee they can charge.

<SDKDoc>
  <TypeScript name="changeApprovedBuilder" type="method" owner="DriftClient">
```js
// max fee is expressed in tenths of a basis point (100 = 10 bps)
await userClient.changeApprovedBuilder(builderAuthority, 200, true);
```
  </TypeScript>
</SDKDoc>

