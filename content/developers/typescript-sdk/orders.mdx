## Orders

This page focuses on placing and canceling orders via `DriftClient`. For concise examples we use helper builders like `getMarketOrderParams(...)`.

### Build market order params

<SDKDoc>
  <TypeScript name="getMarketOrderParams" type="function">
```js
import { BN, BASE_PRECISION, MarketType, PositionDirection, getMarketOrderParams } from "@drift-labs/sdk";

const orderParams = getMarketOrderParams({
  marketIndex: 0,
  marketType: MarketType.PERP,
  direction: PositionDirection.LONG,
  baseAssetAmount: new BN(1).mul(BASE_PRECISION), // 1 SOL (in 1e9 precision)
});
```
  </TypeScript>
</SDKDoc>

### Precision helpers for orders

<SDKDoc>
  <TypeScript name="convertToPerpPrecision" type="method" owner="DriftClient">
```js
const size = driftClient.convertToPerpPrecision(1); // 1 base unit (BN)
console.log(size.toString());
```
  </TypeScript>
</SDKDoc>

<SDKDoc>
  <TypeScript name="convertToPricePrecision" type="method" owner="DriftClient">
```js
const price = driftClient.convertToPricePrecision(21.23); // price BN
console.log(price.toString());
```
  </TypeScript>
</SDKDoc>

### Place a perp order

<SDKDoc>
  <TypeScript name="placePerpOrder" type="method" owner="DriftClient">
```js
// Assumes `driftClient` is subscribed.
const txSig = await driftClient.placePerpOrder(
  getMarketOrderParams({
    marketIndex: 0,
    direction: PositionDirection.LONG,
    baseAssetAmount: new BN(1).mul(BASE_PRECISION),
  })
);
console.log(txSig);
```
  </TypeScript>
</SDKDoc>

### Oracle / auction-style orders (example shape)

```js
// Example shape from older docs: auction params + oracle offset.
// This is a usage pattern example; verify fields against the `OrderParams` type.
const oraclePrice = driftClient.getOracleDataForPerpMarket(18).price;
const auctionStartPrice = oraclePrice.neg().divn(1000);
const auctionEndPrice = oraclePrice.divn(1000);

const orderParams = {
  orderType: OrderType.ORACLE,
  baseAssetAmount: driftClient.convertToPerpPrecision(10),
  direction: PositionDirection.LONG,
  marketIndex: 18,
  auctionStartPrice,
  auctionEndPrice,
  oraclePriceOffset: oraclePrice.divn(500).toNumber(),
  auctionDuration: 30,
};

await driftClient.placePerpOrder(orderParams);
```

### Place a spot order

<SDKDoc>
  <TypeScript name="placeSpotOrder" type="method" owner="DriftClient">
```js
// Example uses a simplified object; adjust fields to your strategy.
await driftClient.placeSpotOrder({
  marketIndex: 1,
  direction: PositionDirection.LONG,
  // ... order fields (amount/price/etc)
});
```
  </TypeScript>
</SDKDoc>

### Place multiple orders

<SDKDoc>
  <TypeScript name="placeOrders" type="method" owner="DriftClient">
```js
await driftClient.placeOrders([
  {
    orderType: OrderType.LIMIT,
    marketType: MarketType.PERP,
    marketIndex: 0,
    direction: PositionDirection.LONG,
    baseAssetAmount: driftClient.convertToPerpPrecision(1),
    price: driftClient.convertToPricePrecision(21.23),
  },
  {
    orderType: OrderType.LIMIT,
    marketType: MarketType.PERP,
    marketIndex: 0,
    direction: PositionDirection.SHORT,
    baseAssetAmount: driftClient.convertToPerpPrecision(1),
    oraclePriceOffset: driftClient.convertToPricePrecision(0.05).toNumber(),
  },
]);
```
  </TypeScript>
</SDKDoc>

### Cancel orders

<SDKDoc>
  <TypeScript name="cancelOrder" type="method" owner="DriftClient">
```js
await driftClient.cancelOrder(1);
```
  </TypeScript>
</SDKDoc>

<SDKDoc>
  <TypeScript name="cancelOrderByUserOrderId" type="method" owner="DriftClient">
```js
await driftClient.cancelOrderByUserOrderId(1);
```
  </TypeScript>
</SDKDoc>

<SDKDoc>
  <TypeScript name="cancelOrders" type="method" owner="DriftClient">
```js
import { MarketType, PositionDirection } from "@drift-labs/sdk";

// Cancels orders matching the filters. To cancel all orders, omit parameters.
await driftClient.cancelOrders(MarketType.PERP, 0, PositionDirection.LONG);
```
  </TypeScript>
</SDKDoc>

### Cancel and place (atomic)

<SDKDoc>
  <TypeScript name="cancelAndPlaceOrders" type="method" owner="DriftClient">
```js
await driftClient.cancelAndPlaceOrders(
  { marketType: MarketType.PERP, marketIndex: 0 },
  [
    {
      orderType: OrderType.LIMIT,
      marketIndex: 0,
      direction: PositionDirection.LONG,
      baseAssetAmount: driftClient.convertToPerpPrecision(1),
      price: driftClient.convertToPricePrecision(21.23),
    },
  ]
);
```
  </TypeScript>
</SDKDoc>

### Modify orders

<SDKDoc>
  <TypeScript name="modifyOrder" type="method" owner="DriftClient">
```js
await driftClient.modifyOrder({
  orderId: 1,
  newBaseAssetAmount: driftClient.convertToPerpPrecision(2),
});
```
  </TypeScript>
</SDKDoc>

<SDKDoc>
  <TypeScript name="modifyOrderByUserOrderId" type="method" owner="DriftClient">
```js
await driftClient.modifyOrderByUserOrderId({
  userOrderId: 1,
  newBaseAssetAmount: driftClient.convertToPerpPrecision(2),
});
```
  </TypeScript>
</SDKDoc>

TODO:
- Add trigger-order and auction examples (TRIGGER_* and ORACLE auction params).

